# Next Step

## 추구미 (추구하는 미래상)

단축키만으로 대화 블록을 자유롭게 조작하는 앱. 마우스 없이 키보드만으로 대화 컨텍스트를 젠가처럼 쌓고, 빼고, 재배치한다.

## 현재 상태

1~4단계 기본 구현 완료. claude --print와 통신하는 macOS 채팅 앱이 동작함.

**동작하는 것:**
- NDJSON 파싱 (단위 테스트 통과)
- claude CLI 프로세스 스폰 및 양방향 통신
- 스트리밍 응답 실시간 표시
- 메시지 히스토리 UI
- 대화 컨텍스트 유지 (히스토리를 새 세션에 포함하여 전송)

**깨져있던 것 (수정 완료):**
- ClaudeProcessTests: stateless 아키텍처에 맞게 갱신됨

## 방금 완료한 작업

대화 컨텍스트 유지 기능 구현:
- `ConversationFormatter`: 히스토리 + 새 메시지를 프롬프트로 포맷
- `ClaudeProcess.send(message:history:)`: 히스토리 파라미터 추가
- `ChatView`: 메시지 전송 시 이전 대화 히스토리를 함께 전달
- 단위 테스트 3개 추가 (ConversationFormatterTests)
- 깨져있던 통합 테스트 수정 (ClaudeProcessTests)

## 다음 단계 후보

### A. React Ink(터미널) 버전
터미널 UI가 추구미에 더 맞을 수 있음. 버튼 없이 단축키만으로 조작. 텍스트 선택도 터미널 네이티브로 해결.
- 대화 길어질 때: `d` 키로 삭제 모드 진입 → 화살표로 블록 선택 → Enter 삭제 → Esc 복귀 (vim 스타일)
- 하단에 키 힌트 텍스트로 표시 (`⌘1:삭제 ⌘2:삭제 ...`)

### B. 마우스 드래그로 대화 텍스트 선택
현재 SwiftUI 버전은 개별 말풍선 단위로만 텍스트 선택 가능. 여러 말풍선을 걸쳐서 죽 긁어 선택하려면 전체 대화를 NSTextView 기반으로 전환 필요. (터미널 버전은 이 문제 없음)

### C. 마크다운 렌더링
assistant 응답에 기본 마크다운 렌더링 적용. (코드 블록, 볼드, 리스트 등)

### C. 새 대화 시작
히스토리를 초기화하고 새 대화를 시작하는 단축키 추가.
